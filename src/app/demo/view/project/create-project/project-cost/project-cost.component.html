<div>

    <div style="display: flex;">
        <div class="md:col-6" style="padding: 0px !important">
            <h5 style="margin: 0;">Project Cost</h5>
        </div>
        <div class="md:col-6" style="display: flex; padding: 0px !important;
        justify-content: flex-end;">
            <div style="padding: 5px;"><button pButton pRipple type="button" label="Download As Pdf"
                    (click)="downloadAsPdf()"></button></div>
        </div>
    </div>
    <hr style="margin-top: 1px;margin-bottom: 22px;color: gray;background-color: #d9d2d2;height: 1px;border: none;">
        <p-tabView>
            <p-tabPanel header="Sow">
                <div id="pdf-content">
                <div *ngIf="projectInfo!=null">
                    <div>
                        <h5 style="margin-top: 12px;">Project Information</h5>
                    </div>
                    <div class="p-fluid grid">
                        <div class="col-12 md:col-4">
                            <label><b>Company Name</b></label><br>
                            <label>{{projectInfo?.company?.name}}</label>
                        </div>
                        <div class="col-12 md:col-4">
                            <label><b>Company Code</b></label><br>
                            <label>{{projectInfo?.customerCode}}</label>
                        </div>
                        <div class="col-12 md:col-4">
                            <label><b>Industry Vertical</b></label><br>
                            <label>{{projectInfo?.industryVertical?.name}}</label>
                        </div>
                        <div class="col-12 md:col-4">
                            <label><b>Region</b></label><br>
                            <label>{{projectInfo?.region?.name}}</label>
                        </div>
                        <div class="col-12 md:col-4">
                            <label><b>Opportunity Name</b></label><br>
                            <label>{{projectInfo?.opportunityName?.name}}
                            </label>
                        </div>
                        <div class="col-12 md:col-4">
                            <label><b>Opportunity Manager</b></label><br>
                            <label>{{ getOpportunityManagerNames(projectInfo?.opportunityManager) }}</label>
                        </div>
                        <div class="col-12 md:col-4">
                            <label><b>Project Stage</b></label><br>
                            <label>{{projectInfo?.projectStage?.name}}
                            </label>
                        </div>
                        <div class="col-12 md:col-4">
                            <label><b>Project Status</b></label><br>
                            <label>{{projectInfo?.projectStatus?.name}}
                            </label>
                        </div>
                        <div class="col-12 md:col-4">
                            <label><b>Start Date</b></label><br>
                            <label>{{projectInfo?.startDate | date:'dd MMM yyyy'}}
                            </label>
                        </div>
                    </div>
                    <hr style="margin-top: 1px;margin-bottom: 22px;color: gray;background-color: #d9d2d2;height: 1px;border: none;">
                    <!-- <div>
                        <h5 style="margin-top: 12px;">Project Scope</h5>
                    </div> -->
                    <div style="display: flex;">
                        <div class="md:col-6" style="padding: 0px !important">
                            <h5 style="margin: 0;">Project Scope</h5>
                        </div>
                        <div class="md:col-6" style="display: flex; padding: 0px !important;
                        justify-content: flex-end;">
                          <div style="padding: 5px;"><button pButton pRipple type="button" (click)="isExpanded = !isExpanded">
                            {{ isExpanded ? 'Collapse All' : 'Expand All' }}</button></div>                    
                        </div>
                    </div>
                    <div>
                        <p-accordion>
                            <p-accordionTab *ngFor="let block of getSavedBlockslist?.buildingBlocks" [selected]="isExpanded">
                                <p-header>Service: {{ block.buildingBlockName }}</p-header>
                                <div *ngIf="block?.serviceDescription"  style="display: flex;align-items: baseline">
                                    <b style="display: inline;">Service Description:</b>
    <p style="display: inline; margin-left: 5px;" [innerHTML]="block.serviceDescription">{{ block.serviceDescription }}</p>
                                </div>
                                <br>
                                <p-table *ngIf="block.processes && block.processes.length > 0" [value]="block.processes" dataKey="processId"
                                    editMode="row" [tableStyle]="{'min-width': '50rem'}">
                                    <ng-template pTemplate="header">
                                        <tr>
                                            <th style="width:20%">Service Steps</th>
                                            <th style="width:15%">Configuration</th>
                                            <th style="width:15%">Location</th>
                                            <th style="width:10%">Origin/Destination</th>
                                            <th style="width:5%">Remarks</th>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="body" let-process>
                                        <ng-container *ngFor="let process of block?.processes; let i = index">
                                            <tr>
                                                <td>{{process.processNumber}}. {{process.processName}}</td>
                                                <td>
                                                    <ng-container *ngIf="process?.originService || process?.destinationService">
                                                        <ng-container *ngIf="process?.originService">
                                                            <ng-container *ngFor="let config of process?.originService?.configurations">
                                                                <ng-container *ngFor="let location of config?.locations">
                                                                    
                                                                        {{config?.configurableName}}<br><br>
                                                                   
                                                                </ng-container>
                                                            </ng-container>
                                                        </ng-container>
                                                        <ng-container *ngIf="process?.destinationService">
                                                            <ng-container *ngFor="let config of process?.destinationService?.configurations">
                                                                <ng-container *ngFor="let location of config?.locations">
                                                                    
                                                                       {{config?.configurableName}}<br><br>
                                                                    
                                                                </ng-container>
                                                            </ng-container>
                                                        </ng-container>
                                                    </ng-container>
                                                </td>
                                            <td>
                                                <ng-container *ngIf="process?.originService">
                                                    <ng-container *ngFor="let config of process?.originService?.configurations">
                                                        <ng-container *ngFor="let location of config.locations">
                                                            {{ location?.locationName }}<br><br>
                                                        </ng-container>
                                                    </ng-container>
                                                </ng-container>
                                                <ng-container *ngIf="process?.destinationService">
                                                    <ng-container *ngFor="let config of process?.destinationService?.configurations">
                                                        <ng-container *ngFor="let location of config.locations">
                                                           {{ location?.locationName }}<br><br>
                                                        </ng-container>
                                                    </ng-container>
                                                </ng-container>
                                            </td>
                                            <td>
                                                <ng-container *ngIf="process?.originService">
                                                    <ng-container *ngFor="let config of process?.originService?.configurations">
                                                        <ng-container *ngFor="let location of config.locations">
                                                         
                                                               Origin <br><br>
                                                            
                                                        </ng-container>
                                                    </ng-container>
                                                </ng-container>
                                                <ng-container *ngIf="process?.destinationService">
                                                    <ng-container *ngFor="let config of process?.destinationService?.configurations">
                                                        <ng-container *ngFor="let location of config.locations">
                                                          
                                                                Destination <br><br>
                                                            
                                                        </ng-container>
                                                    </ng-container>
                                                </ng-container>
                                            </td>
                                            <td>NA</td>
                                            </tr>
                                        </ng-container>
                                    </ng-template>
                                    <ng-template pTemplate="emptymessage">
                                        <tr>
                                            <td style="text-align: center;" colspan="7">No Data found.</td>
                                        </tr>
                                    </ng-template>
                                </p-table>
                            </p-accordionTab>
                        </p-accordion>

                    </div>
                    <hr style="margin-top: 1px;margin-bottom: 22px;color: gray;background-color: #d9d2d2;height: 1px;border: none;">
                </div>
                </div>
                <!-- <div class="col-12" style="display: flex;justify-content: flex-end;">
                    <button type="submit" pButton pRipple label="Submit" (click)="goToNextTab()" class="mr-2 mb-2"></button>
                </div> -->
            </p-tabPanel>
            <p-tabPanel header="P & L Statement">
                <div  style="min-height: 90px;">
                    <div style="margin-top: 90px;">
                        <div style="display: flex;justify-content: center;">
                            <div style="display: flex;justify-content: center;">
                                <!-- <i class="fas fa-upload"></i> -->
                            </div><br>
                        </div><br>
                        <div style="display: flex;justify-content: center;">
                            <h4>Upload P & L Statement</h4>
                        </div>
                        <div style="display: flex;justify-content: center;">
                            <h6>There are no P & L Statement uploaded click on below button to upload the same</h6>
                        </div>
                        <div style="padding: 5px;display: flex;justify-content: center;"><button pButton pRipple type="button" label="Upload"
                            (click)="showDialogOthers()"></button></div>
                    </div>
                </div>

                <div  style="min-height: 90px;">
                    <div style="margin-top: 90px;">
                        <div style="display: flex;justify-content: center;">
                            <div style="display: flex;justify-content: center;">
                                <!-- <i class="fas fa-upload"></i> -->
                            </div><br>
                        </div><br>
                        <div style="display: flex;justify-content: center;">
                            <h4>P & L Statement Uploaded !</h4>
                        </div>
                        <div style="display: flex;justify-content: center;">
                            <h6>There are no P & L Statement uploaded click on below button to upload the same</h6>
                        </div>
                        <div style="display: flex;justify-content: center;">
                            <h6>{{ fileNameOC }}</h6>
                        </div>
                    </div>
                </div>
            </p-tabPanel>
        </p-tabView>
        <div class="col-12" style="display: flex;justify-content: flex-end;">
            <button type="submit" pButton pRipple label="Submit" (click)="goToNextTab()" class="mr-2 mb-2"></button>
        </div>
        <p-toast></p-toast>
</div>

<p-dialog header="Upload" [(visible)]="visiblePandLBox" [style]="{width: '50vw'}">
    <ng-template pTemplate="header">
        <div style="width: 100%;">
            <h5 style="display: contents;">Upload </h5>&nbsp;&nbsp;&nbsp;
            <!-- <h5 style="display: contents;">
                <a href="#" (click)="downloadSampleOpExcel($event)" style="text-decoration: underline;">Download Sample
                    File</a>
            </h5> -->
        </div>
    </ng-template>
    <hr>
    <div>
        <div class="p-fluid grid">
            <div class="col-12 md:col-12">
                <div class="custom-container">
                    <h6><b>Instructions</b></h6>
                    <!-- <ul class="list" style="display:inline;"> -->
                <p><b>1.</b> Maximum File Size: 5MB <b>2.</b> File Format: xlsx and xls <b>3.</b> Only one P & L Statement can be uploaded at a time
                <b> 4.</b> Make sure to provide valid data
                    <b> 5.</b> Keep file name recognizable</p>
                    <!-- </ul> -->
                </div>
            </div>
            <div class="col-12 md:col-12">
                <div class="custom-container">
                    <h6><b>Upload</b></h6>
                    <div *ngIf="showUploaderror" style="color: red;">
                        Upload error: All fields empty or exceeds 1000 characters. Review the file before uploading.
                    </div>
                    <div class="box">
                        <div class="card-body">
                            <div class="container">
                                <label for="fileInput" class="custom-file-input">
                                    <i class="pi pi-upload" style="font-size: 30px;display: block;"></i>
                                    <div class="upload_name">Upload</div>
                                </label>
                                <p style="text-align: center;">{{fileNameOC}}</p>
                                <input type="file" id="fileInput" (change)="onFileSelected($event)"
                                    style="display: none;" accept=".xlsx">
                            </div>
                        </div>
                    </div>
                    <div class="card_footer">
                        <div>
                            <button type="submit" pButton pRipple class="p-button-outlined mr-2 mb-2" [disabled]="!selectedFile"
                                (click)="onRemoveOperationClick()">
                                Remove File
                            </button>
                        </div>
                        <div class="uplodBtn_right">
                            <button type="submit" (click)="onOperarationCancelClick()" pButton pRipple
                            class="p-button-outlined mr-2 mb-2">Cancel</button>
                            <button type="submit" pButton pRipple class="mr-2 mb-2" [disabled]="!selectedFile"
                                (click)="onUploadClick($event)">
                                Submit
                            </button>
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</p-dialog>
